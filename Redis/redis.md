Redis单线程

+   redis为什么这么快
    1.  完全基于内存,绝大部分请求是纯粹的内存操作,数据存储在内存中
    2.  数据结构简单,对数据操作也简单,Redis中的数据结构是专门设计的

**缓存雪崩**

​	redis服务器宕机

​	*解决方案*：

​	事前：redis高可用，主从复制+哨兵[[哨兵Sentinel]] redus cluster 避免全盘崩溃

​	事中：本地ehcache缓存 + hystrix限流加降级 避免MySql被打死

​	事后： redis持久化 一旦重启 自动从磁盘上加载数据快速恢复缓存数据

**缓存穿透**

​	查询的key在数据库中没有 这样每次请求都会穿透redis进入数据库中 导致数据库崩溃

​	*解决方案*：每次系统A从数据库中只要没查到 就写一个空值存到缓存中 然后设置一个过期时间 下次有相同key来访问的时候在缓存失效之前 都可以直接从缓存中取数据

 **缓存击穿**

​	某个key非常热点 访问非常频繁 处于集中式高并发访问的情况 当这个key在失效的瞬间 大量请求直接击穿了缓存

直接请求数据库

​	*解决方案*：将热点数据设置成永不过期，或者基于redis or zookeeper实现互斥锁 等待第一个请求构建完缓存之后再释放锁 进而其他请求才能通过该key访问数据